{% extends 'a_teacher/dashboard-frag.html' %}
{% load static %}

{% block title %}
  Chat
{% endblock %}

{% block head %}
  <link rel="stylesheet" href="{% static 'css/chat.css' %}" />
  <link rel="stylesheet" href="{% static 'css/chatting.css' %}" />
  {{ request.user.username|json_script:'me-username' }}
  {{ receiver.username|json_script:'other-user' }}
  {{ room_name|json_script:'room-name' }}
{% endblock %}

{% block page_title %}
  <h1 class="username">{{ receiver.username }}</h1>
{% endblock %}

{% block content %}
  <div class="message">
    <div class="chat-user">
      <a id="admin-btn" class="chat-user-btn active">
        <i class="fas fa-user-shield"></i>
        <p>Admin</p>
      </a>
      <a id="teacher-btn" class="chat-user-btn">
        <i class="fas fa-chalkboard-teacher"></i>
        <p>Teacher</p>
      </a>
      <a id="student-btn" class="chat-user-btn">
        <i class="fas fa-user-graduate"></i>
        <p>Student</p>
      </a>
    </div>

    {% include 'fragments/user-list-teacher.html' %}

    <!-- MESSAGE HERE -->
    <div class="messages-holder">
      <div class="message-content">
        <div class="message-data" id="chat-log">
          {% for chat_message in chat_messages %}
            <div class="{% if chat_message.sender.user == request.user %}
                
                
                
                
                
                
                
              sender










              {% else %}
                
                
                
                
                
                
                
                
                
                
              receiver










              {% endif %}">
              <p>{{ chat_message.message }}</p>
              <p class="data">{{ chat_message.timestamp }}</p>
            </div>
          {% empty %}
            <p class="no-message">No Message Yet.</p>
          {% endfor %}
        </div>
      </div>
      <div class="message-form">
        <div class="form" action="">
          <i class="fa-sharp fa-solid fa-paperclip"></i>

          <input type="text" placeholder="Write a message..." class="message-input" id="message-input" />

          <div class="right-icons">
            <i class="far fa-smile emoji-btn"></i>
            <button type="button" class="send-btn" id="send-button"><i class="fas fa-paper-plane"></i></button>
          </div>
        </div>
      </div>
    </div>
  </div>
{% endblock %}

{% block script %}
  <script src="{% static 'js/chat.js' %}"></script>
  <script src="{% static 'js/chatting.js' %}"></script>
  <script src="{% static 'js/online-status.js' %}"></script>
  <script src="{% static 'js/vanillaEmojiPicker.js' %}"></script>
  <script></script>
{% endblock %}
