<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>User Search with Absolute Dropdown Tabs</title>
    <style>
      /* wrapper for search + dropdown */
      

      /* tabs row */
      .tabs {
        display: flex;
        border-bottom: 2px solid #ddd;
        margin-top: 0.5em;
      }
      .tab {
        flex: 1;
        padding: 0.75em;
        text-align: center;
        cursor: pointer;
        border: none;
        background: none;
        font-size: 1em;
      }
      .tab.active {
        border-bottom: 3px solid #007bff;
        color: #007bff;
      }

      /* tab contents */
      .tab-content {
        display: none;
        padding: 1em 0;
        background: #fafafa;
        border: 1px solid #ddd;
        border-top: none;
      }
      .tab-content.active {
        display: block;
      }
    </style>
  </head>
  <body>
    <div id="search-wrapper">
      <input
        type="text"
        id="search"
        placeholder="Type a nameâ€¦"
        autocomplete="off"
      />
      <div id="dropdown">
        <ul id="suggestions"></ul>

        <div class="tabs">
          <button class="tab active" data-target="all">All</button>
          <button class="tab" data-target="admins">Admins</button>
          <button class="tab" data-target="customers">Customers</button>
        </div>

        <div class="tab-content active" id="all">
          <p>All users will show here.</p>
        </div>
        <div class="tab-content" id="admins">
          <p>Admins only.</p>
        </div>
        <div class="tab-content" id="customers">
          <p>Customers only.</p>
        </div>
      </div>
    </div>

    <script>
      const userNames = {{ names|safe }};
      const inp = document.getElementById('search');
      const suggestList = document.getElementById('suggestions');

      inp.addEventListener('input', () => {
        const v = inp.value.toLowerCase();
        suggestList.innerHTML = '';
        if (!v) return;
        userNames
          .filter(n => n.toLowerCase().startsWith(v))
          .forEach(n => {
            const li = document.createElement('li');
            li.textContent = n;
            li.onclick = () => inp.value = n;
            suggestList.appendChild(li);
          });
      });

      document.querySelectorAll('.tab').forEach(tab =>
        tab.addEventListener('click', () => {
          // activate tab button
          document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
          tab.classList.add('active');
          // switch content
          document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
          document.getElementById(tab.dataset.target).classList.add('active');
        })
      );
    </script>
  </body>
</html>
